<link rel="import" href="../../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../../bower_components/aqa-panel/aqa-panel.html">
<link rel="import" href="../../../../bower_components/aqa-button/aqa-button.html">
<link rel="import" href="../../../../bower_components/aqa-styles/aqa-styles.html">
<link rel="import" href="../../../../bower_components/paper-menu-button/paper-menu-button.html">
<dom-module id="page-panel">
    <template>
        <style include="aqa-styles">
            paper-item {
                width: 100%;
                box-sizing: border-box;
                min-width: 150px;
                --paper-item-min-height: 30px;
            }

            paper-item:hover {
                background-color: #f3f7f9;
            }

            paper-listbox {
                padding: 0;
                border-radius: 10px;
            }
        </style>
        <aqa-panel>
            <div slot="content">
                <div class="row between-xs">
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <aqa-button type="primary" icon="add" on-click="openDailog">เพิ่ม</aqa-button>
                        <aqa-button type="danger" icon="remove" on-click="confirmDelete">ลบ</aqa-button>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4" style="text-align:right">
                        <aqa-button type="primary-outline" on-click="toPageImport" icon="file-upload">Import</aqa-button>
                        <paper-menu-button no-overlap horizontal-align="right" no-animations>
                            <aqa-button type="primary-outline" icon="file-download" slot="dropdown-trigger">
                                Export
                            </aqa-button>
                            <paper-listbox slot="dropdown-content">
                                <paper-item>Excel</paper-item>
                            </paper-listbox>
                        </paper-menu-button>

                    </div>
                </div>
                <slot></slot>
            </div>
        </aqa-panel>

    </template>

    <script>

        class PagePanel extends Polymer.Element {

            static get is() {
                return 'page-panel';
            }

            static get properties() {
                return {
                    form: String
                };
            }
            openDailog() {
                if (this.form) {
                    Nylon.dispatch('clearCommon')
                    Nylon.dialog.open('/' + this.form, { active: false, field: this.colunm, select: 'select' })
                }
                this.dispatchEvent(new CustomEvent('add'));
            }
            confirmDelete() {
                Nylon.swal({ nylon: 'confirm' })
                    .then((res) => {
                        if (res) {
                            Nylon.swal({ nylon: 'success', title: 'ลบข้อมูลสำเร็จ', text: "ระบบได้ลบข้อมูลของคุณแล้ว" })
                        }
                    })
                this.dispatchEvent(new CustomEvent('delete-all'));
            }
            toPageImport(){
                Nylon.page('import')
            }
        }

        window.customElements.define(PagePanel.is, PagePanel);
    </script>
</dom-module>